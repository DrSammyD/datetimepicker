!function(a){"function"==typeof define&&define.amd?define(["jquery","moment","jquery.mousewheel"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a,b){"use strict";Date.prototype.dateFormat=function(a){return b(this).format(a)},Date.parseDate=function(a,c){return b(a,c).toDate()};var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb="YYYY/MM/DD HH:mm",nb="HH:mm",ob="YYYY/MM/DD",pb={months:"months",dayOfWeek:"weekdaysShort"},qb=function(a,c){return b[pb[c]]()},rb=function(a){a.dayOfWeekStart=b.localeData().firstDayOfWeek()},sb=function(a){c=a,d="keyup."+c+"ctrl",e="afterOpen."+c,f="blur."+c,g="changedatetime."+c,h="click."+c,i="close."+c,j="dblclick."+c,k="focusin."+c,l="generate."+c,m="keydown."+c,n="mousedown."+c,o="mouseup."+c,p="mousewheel."+c,q="open."+c,r="resize."+c,s="toggle."+c,t="xchange."+c,u="error_input."+c,v="select."+c,w="resize_scroll."+c+"_scroller",x="scroll_element."+c+"_scroller",y="mousedown."+c+"_scroller",z="mousemove."+c+"_scroller",A="mouseup."+c+"_scroller",B="resize_scroll."+c+"_scroller",C="scroll_element."+c+"_scroller",D="touchstart."+c+"_scroller",E="keydown."+c+"ctrl",F="keyup."+c+"ctrl",G=c+"_calendar",H=c+"_copyright",I=c+"_current",J=c+"_date",K=c+"_datepicker",L=c+"_datetime",M=c+"_datetimepicker",N=c+"_day_of_week",O=c+"_disabled",P=c+"_init_time",Q=c+"_inline",R=c+"_label",S=c+"_month",T=c+"_monthselect",U=c+"_monthpicker",V=c+"_next",W=c+"_noselect",X=c+"_option",Y=c+"_other_month",Z=c+"_prev",$=c+"_scrollbar",_=c+"_scroller",ab=c+"_scroller_box",bb=c+"_select",cb=c+"_showweeks",db=c+"_time",eb=c+"_time_box",fb=c+"_time_variant",gb=c+"_timepicker",hb=c+"_today",ib=c+"_today_button",jb=c+"_weekend",kb=c+"_year",lb=c+"_yearselect"};sb("xdsoft");var tb={i18n:pb,template:{datepicker:function(){return'<div class="'+K+' active"></div>'},month_picker:function(){return'<div class="'+U+'"><button type="button" class="'+Z+'"></button><button type="button" class="'+ib+'"></button><div class="'+R+" "+S+'"><span></span><i></i></div><div class="'+R+" "+kb+'"><span></span><i></i></div><button type="button" class="'+V+'"></button></div>'},calendar:function(){return'<div class="'+G+'"></div>'},timepicker:function(){return'<div class="'+gb+' active"><button type="button" class="'+Z+'"></button><div class="'+eb+'"></div><button type="button" class="'+V+'"></button></div>'},timebox:function(){return'<div class="'+fb+'"></div>'},monthselect:function(){return'<div class="'+bb+" "+T+'"><div></div></div>'},yearselect:function(){return'<div class="'+bb+" "+lb+'"><div></div></div>'}},value:"",lang:"en",format:mb,formatTime:nb,formatDate:ob,startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:V,prev:Z,dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c,d;for(c=b||0,d=this.length;d>c;c+=1)if(this[c]===a)return c;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},a.fn.xdsoftScroller=function(b){return this.each(function(){var c,d,e,f,g,h=a(this),i=function(a){var b,c={x:0,y:0};return"touchstart"===a.type||"touchmove"===a.type||"touchend"===a.type||"touchcancel"===a.type?(b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],c.x=b.clientX,c.y=b.clientY):("mousedown"===a.type||"mouseup"===a.type||"mousemove"===a.type||"mouseover"===a.type||"mouseout"===a.type||"mouseenter"===a.type||"mouseleave"===a.type)&&(c.x=a.clientX,c.y=a.clientY),c},j=100,k=!1,l=0,m=0,n=0,o=!1,p=0,q=function(){};return"hide"===b?void h.find("."+$).hide():(a(this).hasClass(ab)||(c=h.children().eq(0),d=h[0].clientHeight,e=c[0].offsetHeight,f=a('<div class="'+$+'"></div>'),g=a('<div class="'+_+'"></div>'),f.append(g),h.addClass(ab).append(f),q=function(a){var b=i(a).y-l+p;0>b&&(b=0),b+g[0].offsetHeight>n&&(b=n-g[0].offsetHeight),h.trigger(C,[j?b/j:0])},g.on([D,y].join(" "),function(c){d||h.trigger(B,[b]),l=i(c).y,p=parseInt(g.css("margin-top"),10),n=f[0].offsetHeight,"mousedown"===c.type?(document&&a(document.body).addClass(W),a([document.body,window]).on(A,function e(){a([document.body,window]).off(A,e).off(z,q).removeClass(W)}),a(document.body).on(z,q)):(o=!0,c.stopPropagation(),c.preventDefault())}).on("touchmove",function(a){o&&(a.preventDefault(),q(a))}).on("touchend touchcancel",function(){o=!1,p=0}),h.on(C,function(a,b){d||h.trigger(B,[b,!0]),b=b>1?1:0>b||isNaN(b)?0:b,g.css("margin-top",j*b),setTimeout(function(){c.css("marginTop",-parseInt((c[0].offsetHeight-d)*b,10))},10)}).on(B,function(a,b,i){var k,l;d=h[0].clientHeight,e=c[0].offsetHeight,k=d/e,l=k*f[0].offsetHeight,k>1?g.hide():(g.show(),g.css("height",parseInt(l>10?l:10,10)),j=f[0].offsetHeight-g[0].offsetHeight,i!==!0&&h.trigger(C,[b||Math.abs(parseInt(c.css("marginTop"),10))/(e-d)]))}),h.on("mousewheel",function(a){var b=Math.abs(parseInt(c.css("marginTop"),10));return b-=20*a.deltaY,0>b&&(b=0),h.trigger(C,[b/(e-d)]),a.stopPropagation(),!1}),h.on("touchstart",function(a){k=i(a),m=Math.abs(parseInt(c.css("marginTop"),10))}),h.on("touchmove",function(a){if(k){a.preventDefault();var b=i(a);h.trigger(C,[(m-(b.y-k.y))/(e-d)])}}),h.on("touchend touchcancel",function(){k=!1,m=0})),void h.trigger(B,[b]))})};var ub=function(){};a.fn.datetimepicker=function(b){a.fn.datetimepicker.setNamespace=ub;var d,w,x=48,y=57,z=96,A=105,B=17,D=46,G=13,H=27,K=8,U=37,$=38,_=39,ab=40,fb=9,gb=116,lb=65,mb=67,nb=86,ob=90,pb=89,sb=!1,vb=a.isPlainObject(b)||!b?a.extend(!0,{},tb,b):a.extend(!0,{},tb),wb=0,xb=function(a){a.on([q,k,n].join(" "),function b(){a.is(":disabled")||a.data(M)||(clearTimeout(wb),wb=setTimeout(function(){a.data(M)||d(a),a.off([q,k,n].join(" "),b).trigger(q)},100))})};return d=function(d){function w(){var a,b=!1;return vb.startDate?b=xb.strToDate(vb.startDate):(b=vb.value||(d&&d.val&&d.val()?d.val():""),b?b=xb.strToDateTime(b):vb.defaultDate&&(b=xb.strToDate(vb.defaultDate),vb.defaultTime&&(a=xb.strtotime(vb.defaultTime),b.setHours(a.getHours()),b.setMinutes(a.getMinutes())))),b&&xb.isValidDate(b)?yb.data("changed",!0):b="",b||0}var E,F,tb,ub,wb,xb,yb=a("<div "+(vb.id?'id="'+vb.id+'"':"")+" "+(vb.style?'style="'+vb.style+'"':"")+' class="'+M+" "+c+"_"+vb.theme+" "+W+" "+(vb.weeks?" "+cb:"")+vb.className+'"></div>'),zb=a(zb),Ab=a(vb.template.datepicker()),Bb=a(vb.template.month_picker()),Cb=a(vb.template.calendar()),Db=a(vb.template.timepicker()),Eb=Db.find("."+eb).eq(0),Fb=a(vb.template.timebox()),Gb=a(vb.template.monthselect()),Hb=a(vb.template.yearselect()),Ib=!1,Jb=0,Kb=0;Bb.find("."+S+" span").after(Gb),Bb.find("."+kb+" span").after(Hb),Bb.find("."+S+",."+kb).on(n,function(b){var c,d,e=a(this).find("."+bb).eq(0),f=0,g=0,h=e.is(":visible");for(Bb.find("."+bb).hide(),xb.currentTime&&(f=xb.currentTime[a(this).hasClass(S)?"getMonth":"getFullYear"]()),e[h?"hide":"show"](),c=e.find("div."+X),d=0;d<c.length&&c.eq(d).data("value")!==f;d+=1)g+=c[0].offsetHeight;return e.xdsoftScroller(g/(e.children()[0].offsetHeight-e[0].clientHeight)),b.stopPropagation(),!1}),Bb.find("."+bb).xdsoftScroller().on(n,function(a){a.stopPropagation(),a.preventDefault()}).on(n,"."+X,function(){var b=xb.currentTime.getFullYear();xb&&xb.currentTime&&xb.currentTime[a(this).parent().parent().hasClass(T)?"setMonth":"setFullYear"](a(this).data("value")),a(this).parent().parent().hide(),yb.trigger(t),vb.onChangeMonth&&a.isFunction(vb.onChangeMonth)&&vb.onChangeMonth.call(yb,xb.currentTime,yb.data("input")),b!==xb.currentTime.getFullYear()&&a.isFunction(vb.onChangeYear)&&vb.onChangeYear.call(yb,xb.currentTime,yb.data("input"))}),yb.setOptions=function(b){if(vb=a.extend(!0,{},vb,b),b.allowTimes&&a.isArray(b.allowTimes)&&b.allowTimes.length&&(vb.allowTimes=a.extend(!0,[],b.allowTimes)),b.weekends&&a.isArray(b.weekends)&&b.weekends.length&&(vb.weekends=a.extend(!0,[],b.weekends)),b.disabledDates&&a.isArray(b.disabledDates)&&b.disabledDates.length&&(vb.disabledDates=a.extend(!0,[],b.disabledDates)),!vb.open&&!vb.opened||vb.inline||d.trigger(q),vb.inline&&(Ib=!0,yb.addClass(Q),d.after(yb).hide()),vb.inverseButton&&(vb.next=Z,vb.prev=V),vb.datepicker?Ab.addClass("active"):Ab.removeClass("active"),vb.timepicker?Db.addClass("active"):Db.removeClass("active"),vb.value&&(d&&d.val&&d.val(vb.value),xb.setCurrentTime(vb.value)),rb(vb),vb.timepickerScrollbar||Eb.xdsoftScroller("hide"),vb.minDate&&/^-(.*)$/.test(vb.minDate)&&(vb.minDate=xb.strToDateTime(vb.minDate).dateFormat(vb.formatDate)),vb.maxDate&&/^\+(.*)$/.test(vb.maxDate)&&(vb.maxDate=xb.strToDateTime(vb.maxDate).dateFormat(vb.formatDate)),Bb.find("."+ib).css("visibility",vb.todayButton?"visible":"hidden"),vb.mask){var c=function(a){try{if(document.selection&&document.selection.createRange){var b=document.selection.createRange();return b.getBookmark().charCodeAt(2)-2}if(a.setSelectionRange)return a.selectionStart}catch(c){return 0}},h=function(a,b){if(a="string"==typeof a||a instanceof String?document.getElementById(a):a,!a)return!1;if(a.createTextRange){var c=a.createTextRange();return c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select(),!0}return a.setSelectionRange?(a.setSelectionRange(b,b),!0):!1},i=function(a,b){var c=a.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(c).test(b)};d.off(m),vb.mask===!0&&(vb.mask=vb.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===a.type(vb.mask)&&(i(vb.mask,d.val())||d.val(vb.mask.replace(/[0-9]/g,"_")),d.on(m,function(b){var e,f,g=this.value,j=b.which;if(j>=x&&y>=j||j>=z&&A>=j||j===K||j===D){for(e=c(this),f=j!==K&&j!==D?String.fromCharCode(j>=z&&A>=j?j-x:j):"_",j!==K&&j!==D||!e||(e-=1,f="_");/[^0-9_]/.test(vb.mask.substr(e,1))&&e<vb.mask.length&&e>0;)e+=j===K||j===D?-1:1;if(g=g.substr(0,e)+f+g.substr(e+1),""===a.trim(g))g=vb.mask.replace(/[0-9]/g,"_");else if(e===vb.mask.length)return b.preventDefault(),!1;for(e+=j===K||j===D?0:1;/[^0-9_]/.test(vb.mask.substr(e,1))&&e<vb.mask.length&&e>0;)e+=j===K||j===D?-1:1;i(vb.mask,g)?(this.value=g,h(this,e)):""===a.trim(g)?this.value=vb.mask.replace(/[0-9]/g,"_"):d.trigger(u)}else if(-1!==[lb,mb,nb,ob,pb].indexOf(j)&&sb||-1!==[H,$,ab,U,_,gb,B,fb,G].indexOf(j))return!0;return b.preventDefault(),!1}))}vb.validateOnBlur&&d.off(f).on(f,function(){vb.allowBlank&&!a.trim(a(this).val()).length?(a(this).val(null),yb.data(L).empty()):Date.parseDate(a(this).val(),vb.format)?yb.data(L).setCurrentTime(a(this).val()):(a(this).val(xb.now().dateFormat(vb.format)),yb.data(L).setCurrentTime(a(this).val())),yb.trigger(g)}),vb.dayOfWeekStartPrev=0===vb.dayOfWeekStart?6:vb.dayOfWeekStart-1,yb.trigger(t).trigger(e)},yb.data("options",vb).on(n,function(a){return a.stopPropagation(),a.preventDefault(),Hb.hide(),Gb.hide(),!1}),Eb.append(Fb),Eb.xdsoftScroller(),yb.on(e,function(){Eb.xdsoftScroller()}),yb.append(Ab).append(Db),vb.withoutCopyright!==!0&&yb.append(zb),Ab.append(Bb).append(Cb),a(vb.parentID).append(yb),E=function(){var b=this;b.now=function(a){var c,d,e=new Date;return!a&&vb.defaultDate&&(c=b.strToDate(vb.defaultDate),e.setFullYear(c.getFullYear()),e.setMonth(c.getMonth()),e.setDate(c.getDate())),vb.yearOffset&&e.setFullYear(e.getFullYear()+vb.yearOffset),!a&&vb.defaultTime&&(d=b.strtotime(vb.defaultTime),e.setHours(d.getHours()),e.setMinutes(d.getMinutes())),e},b.isValidDate=function(a){return"[object Date]"!==Object.prototype.toString.call(a)?!1:!isNaN(a.getTime())},b.setCurrentTime=function(a){b.currentTime="string"==typeof a?b.strToDateTime(a):b.isValidDate(a)?a:b.now(),yb.trigger(t)},b.empty=function(){b.currentTime=null},b.getCurrentTime=function(){return b.currentTime},b.nextMonth=function(){var c,d=b.currentTime.getMonth()+1;return 12===d&&(b.currentTime.setFullYear(b.currentTime.getFullYear()+1),d=0),c=b.currentTime.getFullYear(),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),d+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(d),vb.onChangeMonth&&a.isFunction(vb.onChangeMonth)&&vb.onChangeMonth.call(yb,xb.currentTime,yb.data("input")),c!==b.currentTime.getFullYear()&&a.isFunction(vb.onChangeYear)&&vb.onChangeYear.call(yb,xb.currentTime,yb.data("input")),yb.trigger(t),d},b.prevMonth=function(){var c=b.currentTime.getMonth()-1;return-1===c&&(b.currentTime.setFullYear(b.currentTime.getFullYear()-1),c=11),b.currentTime.setDate(Math.min(new Date(b.currentTime.getFullYear(),c+1,0).getDate(),b.currentTime.getDate())),b.currentTime.setMonth(c),vb.onChangeMonth&&a.isFunction(vb.onChangeMonth)&&vb.onChangeMonth.call(yb,xb.currentTime,yb.data("input")),yb.trigger(t),c},b.getWeekOfYear=function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},b.strToDateTime=function(a){var c,d,e=[];return a&&a instanceof Date&&b.isValidDate(a)?a:(e=/^(\+|\-)(.*)$/.exec(a),e&&(e[2]=Date.parseDate(e[2],vb.formatDate)),e&&e[2]?(c=e[2].getTime()-6e4*e[2].getTimezoneOffset(),d=new Date(xb.now().getTime()+parseInt(e[1]+"1",10)*c)):d=a?Date.parseDate(a,vb.format):b.now(),b.isValidDate(d)||(d=b.now()),d)},b.strToDate=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,vb.formatDate):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.strtotime=function(a){if(a&&a instanceof Date&&b.isValidDate(a))return a;var c=a?Date.parseDate(a,vb.formatTime):b.now(!0);return b.isValidDate(c)||(c=b.now(!0)),c},b.str=function(){return b.currentTime.dateFormat(vb.format)},b.currentTime=this.now()},xb=new E,Bb.find("."+ib).on(n,function(){yb.data("changed",!0),xb.setCurrentTime(0),yb.trigger(e)}).on(j,function(){d.val(xb.str()),yb.trigger(i)}),Bb.find("."+Z+",."+V).on(n,function(){var b=a(this),c=0,d=!1;!function e(a){xb.currentTime.getMonth();b.hasClass(vb.next)?xb.nextMonth():b.hasClass(vb.prev)&&xb.prevMonth(),vb.monthChangeSpinner&&(d||(c=setTimeout(e,a||100)))}(500),a([document.body,window]).on(o,function f(){clearTimeout(c),d=!0,a([document.body,window]).off(o,f)})}),Db.find("."+Z+",."+V).on(n,function(){var b=a(this),c=0,d=!1,e=110;!function f(a){var g=Eb[0].clientHeight,h=Fb[0].offsetHeight,i=Math.abs(parseInt(Fb.css("marginTop"),10));b.hasClass(vb.next)&&h-g-vb.timeHeightInTimePicker>=i?Fb.css("marginTop","-"+(i+vb.timeHeightInTimePicker)+"px"):b.hasClass(vb.prev)&&i-vb.timeHeightInTimePicker>=0&&Fb.css("marginTop","-"+(i-vb.timeHeightInTimePicker)+"px"),Eb.trigger(C,[Math.abs(parseInt(Fb.css("marginTop"),10)/(h-g))]),e=e>10?10:e-10,d||(c=setTimeout(f,a||e))}(500),a([document.body,window]).on(o,function g(){clearTimeout(c),d=!0,a([document.body,window]).off(o,g)})}),F=0,yb.on(t,function(c){clearTimeout(F),F=setTimeout(function(){for(var c,d,e,f,g,h,i,j="",k=new Date(xb.currentTime.getFullYear(),xb.currentTime.getMonth(),1,12,0,0),m=0,n=xb.now(),o=!1,p=!1,q=[],r=!0,s="",t="";k.getDay()!==vb.dayOfWeekStart;)k.setDate(k.getDate()-1);for(j+="<table><thead><tr>",vb.weeks&&(j+="<th></th>"),c=0;7>c;c+=1)j+="<th>"+qb(vb.lang,"dayOfWeek")[(c+vb.dayOfWeekStart)%7]+"</th>";for(j+="</tr></thead>",j+="<tbody>",vb.maxDate!==!1&&(o=xb.strToDate(vb.maxDate),o=new Date(o.getFullYear(),o.getMonth(),o.getDate(),23,59,59,999)),vb.minDate!==!1&&(p=xb.strToDate(vb.minDate),p=new Date(p.getFullYear(),p.getMonth(),p.getDate()));m<xb.currentTime.countDaysInMonth()||k.getDay()!==vb.dayOfWeekStart||xb.currentTime.getMonth()===k.getMonth();)q=[],m+=1,d=k.getDate(),e=k.getFullYear(),f=k.getMonth(),g=xb.getWeekOfYear(k),q.push(J),h=vb.beforeShowDay&&a.isFunction(vb.beforeShowDay.call)?vb.beforeShowDay.call(yb,k):null,o!==!1&&k>o||p!==!1&&p>k||h&&h[0]===!1?q.push(O):-1!==vb.disabledDates.indexOf(k.dateFormat(vb.formatDate))&&q.push(O),h&&""!==h[1]&&q.push(h[1]),xb.currentTime.getMonth()!==f&&q.push(Y),(vb.defaultSelect||yb.data("changed"))&&xb.currentTime.dateFormat(vb.formatDate)===k.dateFormat(vb.formatDate)&&q.push(I),n.dateFormat(vb.formatDate)===k.dateFormat(vb.formatDate)&&q.push(hb),(0===k.getDay()||6===k.getDay()||~vb.weekends.indexOf(k.dateFormat(vb.formatDate)))&&q.push(jb),vb.beforeShowDay&&a.isFunction(vb.beforeShowDay)&&q.push(vb.beforeShowDay(k)),r&&(j+="<tr>",r=!1,vb.weeks&&(j+="<th>"+g+"</th>")),j+='<td data-date="'+d+'" data-month="'+f+'" data-year="'+e+'" class="'+J+" "+N+k.getDay()+" "+q.join(" ")+'"><div>'+d+"</div></td>",k.getDay()===vb.dayOfWeekStartPrev&&(j+="</tr>",r=!0),k.setDate(d+1);if(j+="</tbody></table>",Cb.html(j),Bb.find("."+R+" span").eq(0).text(qb(vb.lang,"months")[xb.currentTime.getMonth()]),Bb.find("."+R+" span").eq(1).text(xb.currentTime.getFullYear()),s="",t="",f="",i=function(a,b){var c=xb.now();c.setHours(a),a=parseInt(c.getHours(),10),c.setMinutes(b),b=parseInt(c.getMinutes(),10);var d=new Date(xb.currentTime);d.setHours(a),d.setMinutes(b),q=[],(vb.minDateTime!==!1&&vb.minDateTime>d||vb.maxTime!==!1&&xb.strtotime(vb.maxTime).getTime()<c.getTime()||vb.minTime!==!1&&xb.strtotime(vb.minTime).getTime()>c.getTime())&&q.push(O),(vb.initTime||vb.defaultSelect||yb.data("changed"))&&parseInt(xb.currentTime.getHours(),10)===parseInt(a,10)&&(vb.step>59||Math[vb.roundTime](xb.currentTime.getMinutes()/vb.step)*vb.step===parseInt(b,10))&&(vb.defaultSelect||yb.data("changed")?q.push(I):vb.initTime&&q.push(P)),parseInt(n.getHours(),10)===parseInt(a,10)&&parseInt(n.getMinutes(),10)===parseInt(b,10)&&q.push(hb),s+='<div class="'+db+" "+q.join(" ")+'" data-hour="'+a+'" data-minute="'+b+'">'+c.dateFormat(vb.formatTime)+"</div>"},vb.allowTimes&&a.isArray(vb.allowTimes)&&vb.allowTimes.length)for(m=0;m<vb.allowTimes.length;m+=1)t=xb.strtotime(vb.allowTimes[m]).getHours(),f=xb.strtotime(vb.allowTimes[m]).getMinutes(),i(t,f);else for(m=0,c=0;m<(vb.hours12?12:24);m+=1)for(c=0;60>c;c+=vb.step)t=(10>m?"0":"")+m,f=(10>c?"0":"")+c,i(t,f);for(Fb.html(s),b="",m=0,m=parseInt(vb.yearStart,10)+vb.yearOffset;m<=parseInt(vb.yearEnd,10)+vb.yearOffset;m+=1)b+='<div class="'+X+" "+(xb.currentTime.getFullYear()===m?I:"")+'" data-value="'+m+'">'+m+"</div>";for(Hb.children().eq(0).html(b),m=0,b="";11>=m;m+=1)b+='<div class="'+X+" "+(xb.currentTime.getMonth()===m?I:"")+'" data-value="'+m+'">'+qb(vb.lang,"months")[m]+"</div>";Gb.children().eq(0).html(b),a(yb).trigger(l)},10),c.stopPropagation()}).on(e,function(){if(vb.timepicker){var a,b,c,d;Fb.find("."+I).length?a="."+I:Fb.find("."+P).length&&(a="."+P),a?(b=Eb[0].clientHeight,c=Fb[0].offsetHeight,d=Fb.find(a).index()*vb.timeHeightInTimePicker+1,d>c-b&&(d=c-b),Eb.trigger(C,[parseInt(d,10)/(c-b)])):Eb.trigger(C,[0])}}),tb=0,Cb.on(h,"td",function(b){b.stopPropagation(),tb+=1;var c=a(this),e=xb.currentTime;return(void 0===e||null===e)&&(xb.currentTime=xb.now(),e=xb.currentTime),c.hasClass(O)?!1:(e.setDate(1),e.setFullYear(c.data("year")),e.setMonth(c.data("month")),e.setDate(c.data("date")),yb.trigger(v,[e]),d.val(xb.str()),(tb>1||vb.closeOnDateSelect===!0||0===vb.closeOnDateSelect&&!vb.timepicker)&&!vb.inline&&yb.trigger(i),vb.onSelectDate&&a.isFunction(vb.onSelectDate)&&vb.onSelectDate.call(yb,xb.currentTime,yb.data("input"),b),yb.data("changed",!0),yb.trigger(t),yb.trigger(g),void setTimeout(function(){tb=0},200))}),Fb.on(h,"div",function(b){b.stopPropagation();var c=a(this),d=xb.currentTime;return(void 0===d||null===d)&&(xb.currentTime=xb.now(),d=xb.currentTime),c.hasClass(O)?!1:(d.setHours(c.data("hour")),d.setMinutes(c.data("minute")),yb.trigger(v,[d]),yb.data("input").val(xb.str()),vb.inline||yb.trigger(i),vb.onSelectTime&&a.isFunction(vb.onSelectTime)&&vb.onSelectTime.call(yb,xb.currentTime,yb.data("input"),b),yb.data("changed",!0),yb.trigger(t),void yb.trigger(g))}),Ab.on(p,function(a){return vb.scrollMonth?(a.deltaY<0?xb.nextMonth():xb.prevMonth(),!1):!0}),d.on(p,function(a){return vb.scrollInput?!vb.datepicker&&vb.timepicker?(ub=Fb.find("."+I).length?Fb.find("."+I).eq(0).index():0,ub+a.deltaY>=0&&ub+a.deltaY<Fb.children().length&&(ub+=a.deltaY),Fb.children().eq(ub).length&&Fb.children().eq(ub).trigger("mousedown"),!1):vb.datepicker&&!vb.timepicker?(Ab.trigger(a,[a.deltaY,a.deltaX,a.deltaY]),d.val&&d.val(xb.str()),yb.trigger(g),!1):void 0:!0}),yb.on(g,function(b){if(vb.onChangeDateTime&&a.isFunction(vb.onChangeDateTime)){var c=yb.data("input");vb.onChangeDateTime.call(yb,xb.currentTime,c,b),delete vb.value,c.trigger("change")}}).on(l,function(){vb.onGenerate&&a.isFunction(vb.onGenerate)&&vb.onGenerate.call(yb,xb.currentTime,yb.data("input")),Ib&&(yb.trigger(e),Ib=!1)}).on(h,function(a){a.stopPropagation()}),ub=0,wb=function(){var b=yb.data("input").offset(),c=b.top+yb.data("input")[0].offsetHeight-1,d=b.left,e="absolute";vb.fixed?(c-=a(window).scrollTop(),d-=a(window).scrollLeft(),e="fixed"):(c+yb[0].offsetHeight>a(window).height()+a(window).scrollTop()&&(c=b.top-yb[0].offsetHeight+1),0>c&&(c=0),d+yb[0].offsetWidth>a(window).width()&&(d=a(window).width()-yb[0].offsetWidth)),yb.css({left:d,top:c,position:e})},yb.on(q,function(b){var c=!0;vb.onShow&&a.isFunction(vb.onShow)&&(c=vb.onShow.call(yb,xb.currentTime,yb.data("input"),b)),c!==!1&&(yb.show(),wb(),a(window).off(r,wb).on(r,wb),vb.closeOnWithoutClick&&a([document.body,window]).on(n,function d(){yb.trigger(i),a([document.body,window]).off(n,d)}))}).on(i,function(b){var c=!0;Bb.find("."+S+",."+kb).find("."+bb).hide(),vb.onClose&&a.isFunction(vb.onClose)&&(c=vb.onClose.call(yb,xb.currentTime,yb.data("input"),b)),c===!1||vb.opened||vb.inline||yb.hide(),b.stopPropagation()}).on(s,function(){yb.trigger(yb.is(":visible")?i:q)}).data("input",d),Jb=0,Kb=0,yb.data(L,xb),yb.setOptions(vb),xb.setCurrentTime(w()),d.data(M,yb).on([q,k,n].join(" "),function(){d.is(":disabled")||d.data(M).is(":visible")&&vb.closeOnInputClick||(clearTimeout(Jb),Jb=setTimeout(function(){d.is(":disabled")||(Ib=!0,xb.setCurrentTime(w()),yb.trigger(q))},100))}).on(m,function(b){var c,d=(this.value,b.which);return-1!==[G].indexOf(d)&&vb.enterLikeTab?(c=a("input:visible,textarea:visible"),yb.trigger(i),c.eq(c.index(this)+1).focus(),!1):-1!==[fb].indexOf(d)?(yb.trigger(i),!0):void 0})},w=function(b){var d=b.data(M);d&&(d.data(L,null),d.remove(),b.data(M,null).off("."+c),a(window).off(r),a([window,document.body]).off(n),b.unmousewheel&&b.unmousewheel())},a(document).off([E,F].join(" ")).on(E,function(a){a.keyCode===B&&(sb=!0)}).on(F,function(a){a.keyCode===B&&(sb=!1)}),this.each(function(){var c=a(this).data(M);if(c){if("string"===a.type(b))switch(b){case"show":a(this).select().focus(),c.trigger(q);break;case"hide":c.trigger(i);break;case"toggle":c.trigger(s);break;case"destroy":w(a(this));break;case"reset":this.value=this.defaultValue,this.value&&c.data(L).isValidDate(Date.parseDate(this.value,vb.format))||c.data("changed",!1),c.data(L).setCurrentTime(this.value)}else c.setOptions(b);return 0}"string"!==a.type(b)&&(!vb.lazyInit||vb.open||vb.inline?d(a(this)):xb(a(this)))})},a.fn.datetimepicker.defaults=tb,a.fn.datetimepicker.setNamespace=sb});